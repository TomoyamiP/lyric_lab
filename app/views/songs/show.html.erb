<div class="neo-hero">
  <div class="grain"></div>
  <div class="grid"></div>
  <div class="container d-flex justify-content-center pt-4 pb-5">
    <div class="col-md-8 col-lg-6 page-top">
      <!-- Title -->
      <h1 class="title-banner text-center mb-4"><strong><%= @song.title %></strong></h1>
      <small style="color:#c9c3ffb3; text-align: left; display: block; margin-bottom: 12px;">
        Created <%= @song.created_at.strftime("%B") %> <%= @song.created_at.day.ordinalize %>, <%= @song.created_at.year %>
      </small>
      <!-- Metadata -->
      <div class="glass p-4 mb-4 text-start d-flex align-items-start gap-4">
        <div class="flex-grow-1">
          <h2 class="mb-3" style="font-size:1.25rem; font-weight:600;">
            LyriBot generated this song based on:
          </h2>
          <p class="mb-1"><strong>Mood:</strong> <%= @song.mood.presence || "N/A" %></p>
          <p class="mb-1"><strong>Genre:</strong> <%= @song.genre.presence || "N/A" %></p>
          <p class="mb-0"><strong>Keywords:</strong> <%= @song.keywords.presence || "N/A" %></p>
        </div>
        <% if @song.photo.attached? %>
          <div class="text-center" style="max-width: 250px;">
            <%= image_tag @song.photo,
              class: "img-fluid rounded shadow mb-2",
              style: "width: 100%; height: auto; object-fit: cover;",
              alt: "Song Image" %>
            <p class="mb-0" style="font-size:0.9rem; font-weight:500; color:#EEEEEE;">
              Image used for lyrics generation:
            </p>
          </div>
        <% end %>
      </div>
      <!-- Icon Buttons -->
      <% if @song.user == current_user %>
        <div class="d-flex justify-content-center mt-4 w-100" style="gap: 4rem; margin-bottom: 1.5rem;">
          <div class="icon-button-wrapper">
            <%= link_to edit_song_path(@song), class: "icon-button icon-button-edit" do %>
              <i class="fa-solid fa-pen-to-square"></i>
            <% end %>
            <div class="label">Edit</div>
          </div>
          <div class="icon-button-wrapper">
            <button class="icon-button icon-button-share"
                    data-action="click->share#share"
              data-song-id="<%= @song.id %>"
              data-title="<%= @song.title %>">
              <i class="fa-regular fa-paper-plane"></i>
            </button>
            <div class="label">Share</div>
          </div>
          <div class="icon-button-wrapper">
            <%= link_to songs_path, class: "icon-button icon-button-back" do %>
              <i class="fa-solid fa-rotate-left"></i>
            <% end %>
            <div class="label">Back</div>
          </div>
          <div class="icon-button-wrapper">
            <button class="icon-button icon-button-delete js-delete"
                    data-url="<%= song_path(@song) %>">
              <i class="fa-solid fa-trash"></i>
            </button>
            <div class="label">Delete</div>
          </div>
        </div>
      <% end %>
      <!-- Lyrics -->
      <div class="glass p-4 mb-4 flex-grow-1">
        <% @song.generated_lyrics.to_s.split("\n").each do |line| %>
          <p class="mb-2"><%= line %></p>
        <% end %>
      </div>
    </div>
  </div>
</div>
